<?xml version='1.0' encoding='UTF-8'?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1" xmlns:f="http://java.sun.com/jsf/core" 
          xmlns:af="http://xmlns.oracle.com/adf/faces/rich" >
    <jsp:directive.page contentType="text/html;charset=UTF-8"/>
    <f:view>
        <af:document id="d1">
            <af:messages id="m3"/>
  
             
             <!--
             <af:popup id="refreshMVs" binding="#{ImpactRefreshStatusBean.cntrlRefreshMatViewsPopup}">
                <af:dialog title="Refresh Materialized Views" dialogListener="#{pageFlowScope.ImpactAnalysisBean.demoteToPendingIA}" id="d5a">
                       </af:dialog>
            </af:popup>
             -->
            <af:popup id="confirmDemoteToDraft">
                <af:dialog title="Confirm Demote to Pending A" dialogListener="#{pageFlowScope.ImpactAnalysisBean.demoteToPendingIA}" id="d5">
                    <af:activeOutputText value="Are you sure you want to demote this MedDRA Query to draft?" id="aot4"/>
                </af:dialog>
            </af:popup>
            <af:popup id="confirmReviewed">
                <af:dialog title="Confirm Reviewed" dialogListener="#{pageFlowScope.ImpactAnalysisBean.reviewed}" id="d6">
                    <af:activeOutputText value="Are you sure you want to confirm this MedDRA Query as reviewed?" id="aot5"/>
                </af:dialog>
            </af:popup>
            <af:popup id="confirmApproved">
                <af:dialog title="Confirm Approve" dialogListener="#{pageFlowScope.ImpactAnalysisBean.approve}" id="d7">
                    <af:activeOutputText value="Are you sure you want to approve this MedDRA Query?" id="aot6"/>
                </af:dialog>
            </af:popup>
            <af:popup id="confirmDelete">
                <af:dialog title="Confirm Delete" dialogListener="#{pageFlowScope.ImpactAnalysisBean.delete}" id="d2">
                    <af:activeOutputText value="Are you sure you want to delete this MedDRA Query?" id="aot1"/>
                </af:dialog>
            </af:popup>
           
            <af:form id="f1">
                <af:pageTemplate viewId="/CSMQ.jspx" id="pt1" value="#{bindings.pt1}">
                    <f:facet name="header">
                        <af:group id="g2">
                            <af:train value="#{controllerContext.currentViewPort.taskFlowContext.trainModel}" id="t1"
                                      binding="#{ImpactAnalysisUIBean.cntrlTrain}" rendered="true"/>
                            <af:spacer width="10" height="10" id="s1"/>
                        </af:group>
                    </f:facet>
                    <f:facet name="main">
                        <af:group id="g1">
                            <af:popup autoCancel="enabled" id="p4">
                                <af:dialog id="d4" type="ok" title="Impact Legend">
                                    <f:facet name="buttonBar"/>
                                    <af:panelGroupLayout id="pl1" inlineStyle="width:354px;" layout="vertical">
                                        <af:panelGroupLayout id="pgl10">
                                            <af:image source="/image/impact/1010.png" id="i4"/>
                                            <af:spacer width="5" height="10" id="s5"/>
                                            <af:outputFormatted value="Impacted" id="of3" styleClass="Impact_NMQ_1010"/>
                                        </af:panelGroupLayout>
                                        <af:panelGroupLayout id="pgl11">
                                            <af:image source="/image/impact/1080.png" id="i9"/>
                                            <af:spacer width="5" height="10" id="s6"/>
                                            <af:outputFormatted value="Renamed Terms (Italic= BLACK ball)" id="of4" styleClass="Impact_NMQ_1080"/>
                                        </af:panelGroupLayout>
                                        <af:panelGroupLayout id="pgl12">
                                            <af:image id="i5" source="/image/impact/1040.png"/>
                                            <af:spacer width="5" height="10" id="s8"/>
                                            <af:outputFormatted value="MedDRA Inserted/Added Term/Relation" id="of5" styleClass="Impact_NMQ_1040"/>
                                        </af:panelGroupLayout>
                                        <af:panelGroupLayout id="pgl13">
                                            <af:image source="/image/impact/1070.png" id="i6"/>
                                            <af:spacer width="5" height="10" id="s10"/>
                                            <af:outputFormatted value="MQM Inserted/Added New PT" id="of6" styleClass="Impact_NMQ_1070"/>
                                        </af:panelGroupLayout>
                                        <af:panelGroupLayout id="pgl14">
                                            <af:image source="/image/impact/1110.png" id="i10"/>
                                            <af:spacer width="5" height="10" id="s11"/>
                                            <af:outputFormatted value="Other MQM Manual Additions (Bold= WHITE Ball)  " id="of7" styleClass="Impact_NMQ_1110"/>
                                        </af:panelGroupLayout>
                                        <af:panelGroupLayout id="pgl15">
                                            <af:image source="/image/impact/1020.png" id="i7"/>
                                            <af:spacer width="5" height="10" id="s12"/>
                                            <af:outputFormatted value="Deleted/Merged/Moved Term/Relation" id="of8" styleClass="Impact_NMQ_1020"/>
                                        </af:panelGroupLayout>
                                        <af:panelGroupLayout id="pgl17">
                                            <af:image source="/image/impact/1030.png" id="i8"/>
                                            <af:spacer width="5" height="10" id="s13"/>
                                            <af:outputFormatted value="Non-Current LLT (Future NMQs/SMQs)" id="of10" styleClass="Impact_NMQ_1030"/>
                                        </af:panelGroupLayout>
                                        <af:panelGroupLayout id="pgl18">
                                            <af:image source="/image/impact/1050.png" id="i11"/>
                                            <af:spacer width="5" height="10" id="s9"/>
                                            <af:outputFormatted value="Change in TERMSCP (SMQs)" id="of11" styleClass="Impact_SMQ_1050"/>
                                        </af:panelGroupLayout>
                                    </af:panelGroupLayout>
                                </af:dialog>
                            </af:popup>
                            
                            <!--  *** HIERARCHY SEARCH ********************************* -->
                            
                            <af:popup id="p2" binding="#{NMQSourceTermSearchUIBean.searchPopUp}"
                                      popupFetchListener="#{pageFlowScope.ImpactAnalysisBean.hierarchyPopUpFetch}"
                                      contentDelivery="lazyUncached">
                                <af:dialog type="cancel" closeIconVisible="true" title="Hierarchy Search - Future MedDRA Version" id="dialog1" stretchChildren="none"
                                           modal="false" resize="off">
                                    <!-- TREE SEARCH START-->
                                    <af:panelGroupLayout id="pgl9" inlineStyle="width:542px; height:623px;">
                                        <af:panelFormLayout id="pgl7" maxColumns="1" rows="2">
                                            <af:selectOneChoice label="Dictionary" id="soc1" autoSubmit="true"
                                                                
                                                                valueChangeListener="#{pageFlowScope.NMQSourceTermSearchBean.dictionaryTypeChanged}"
                                                                value="BASE"
                                                                binding="#{pageFlowScope.NMQSourceTermSearchBean.controlDictionaryType}">
                                                <af:selectItem label="MedDRA" value="BASE" id="si1"/>
                                                <af:selectItem label="MQ" value="FILTER" id="si13"/>
                                            </af:selectOneChoice>
                                            <af:selectOneChoice id="soc4" label="Level" partialTriggers="soc1"
                                                                binding="#{pageFlowScope.NMQSourceTermSearchBean.controlLevel}"
                                                                value="SOC">
                                                                            <af:selectItem label="SMQ 1" value="MQ1" id="si2" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showSMQSelItems}"/>
                                                                            <af:selectItem label="SMQ 2" value="MQ2" id="si25" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showSMQSelItems}"/>
                                                                            <af:selectItem label="SMQ 3" value="MQ3" id="si26" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showSMQSelItems}"/>
                                                                            <af:selectItem label="SMQ 4" value="MQ4" id="si27" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showSMQSelItems}"/>
                                                                            <af:selectItem label="SMQ 5" value="MQ5" id="si28" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showSMQSelItems}"/>
                                                                            <af:selectItem label="All SMQs" value="MQ%" id="si281" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showSMQSelItems}"/>
                                                                            <af:selectItem label="NMQ/CMQ1 1" value="NMQ1" id="si29" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showNMQSelItems or ( !pageFlowScope.NMQSourceTermSearchBean.meddraSearch and pageFlowScope.ImpactAnalysisBean.mqType eq 'NMQ')}"/>
                                                                            <af:selectItem label="NMQ 2" value="NMQ2" id="si31" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showNMQSelItems or ( !pageFlowScope.NMQSourceTermSearchBean.meddraSearch and pageFlowScope.ImpactAnalysisBean.mqType eq 'NMQ')}"/>
                                                                            <af:selectItem label="NMQ 3" value="NMQ3" id="si32" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showNMQSelItems or ( !pageFlowScope.NMQSourceTermSearchBean.meddraSearch and pageFlowScope.ImpactAnalysisBean.mqType eq 'NMQ')}"/>
                                                                            <af:selectItem label="NMQ 4" value="NMQ4" id="si30" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showNMQSelItems  or ( !pageFlowScope.NMQSourceTermSearchBean.meddraSearch and pageFlowScope.ImpactAnalysisBean.mqType eq 'NMQ')}"/>
                                                                            <af:selectItem label="NMQ 5" value="NMQ5" id="si34" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showNMQSelItems or ( !pageFlowScope.NMQSourceTermSearchBean.meddraSearch and pageFlowScope.ImpactAnalysisBean.mqType eq 'NMQ')}"/>
                                                                             <af:selectItem label="All NMQ/CMQs" value="NMQ%" id="si341" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showNMQSelItems or ( !pageFlowScope.NMQSourceTermSearchBean.meddraSearch and pageFlowScope.ImpactAnalysisBean.mqType eq 'NMQ')}"/>
                                                                            <af:selectItem label="SOC" value="SOC" id="si35" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showMedDRASelItems}"/>
                                                                            <af:selectItem label="HLGT" value="HLGT" id="si36" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showMedDRASelItems}"/>
                                                                            <af:selectItem label="HLT" value="HLT" id="si37" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showMedDRASelItems}"/>
                                                                            <af:selectItem label="PT" value="PT" id="si38" rendered="#{pageFlowScope.NMQSourceTermSearchBean.showMedDRASelItems}"/>
                                                                            <af:selectItem label="LLT" value="LLT" id="si39" rendered="false"/>
                      
                                            </af:selectOneChoice>
                                            <af:inputText label="Term " id="it1" binding="#{NMQSourceTermSearchUIBean.controlTerm}"/>
                                            <af:commandButton text="Search" id="cb2" partialSubmit="true"
                                                              actionListener="#{pageFlowScope.NMQSourceTermSearchBean.doMultiSearch}"
                                                              inlineStyle="height:auto;"/>
                                        </af:panelFormLayout>
                                        
                                        <af:spacer width="10" height="10" id="s3"/>
                                    <af:treeTable value="#{pageFlowScope.HierarchySearchResultsBean.treemodel}" var="row"
                                              emptyText="#{bindings.HierarchySourceTermSearchVO1.viewable ? 'No data to display.' : 'Access Denied.'}"
                                              fetchSize="#{bindings.HierarchySourceTermSearchVO1.rangeSize}"
                                              rowBandingInterval="0" styleClass="AFStretchWidth"
                                              rowSelection="multiple" id="tt5" inlineStyle="height:200px;"
                                              columnStretching="column:c58"
                                              binding="#{pageFlowScope.NMQSourceTermSearchBean.controlMultiResultsTable}"
                                              autoHeightRows="-1" width="521">
                                        <af:column sortProperty="#{bindings.HierarchySourceTermSearchVO1.hints.Rnum.name}"
                                                   sortable="false"
                                                   headerText="#{bindings.HierarchySourceTermSearchVO1.hints.Rnum.label}"
                                                   id="c8" width="1" minimumWidth="1" rendered="false">
                                            <af:inputText value="#{row.bindings.Rnum.inputValue}"
                                                          label="#{bindings.HierarchySourceTermSearchVO1.hints.Rnum.label}"
                                                          required="#{bindings.HierarchySourceTermSearchVO1.hints.Rnum.mandatory}"
                                                          columns="#{bindings.HierarchySourceTermSearchVO1.hints.Rnum.displayWidth}"
                                                          maximumLength="#{bindings.HierarchySourceTermSearchVO1.hints.Rnum.precision}"
                                                          shortDesc="#{bindings.HierarchySourceTermSearchVO1.hints.Rnum.tooltip}"
                                                          id="it4">
                                                <f:validator binding="#{row.bindings.Rnum.validator}"/>
                                                <af:convertNumber groupingUsed="false"
                                                                  pattern="#{bindings.HierarchySourceTermSearchVO1.hints.Rnum.format}"/>
                                            </af:inputText>
                                        </af:column>
                                        <af:column 
                                                   sortable="false" headerText="Content Code" id="c20" width="75">
                                            <af:outputText value="#{row.dictContentCode}"
                                                           id="ot16"/>
                                        </af:column>
                                        <af:column 
                                                   sortable="false" id="c28" width="20" minimumWidth="15">
                                            <af:commandButton id="cb4"
                                                              actionListener="#{pageFlowScope.NMQSourceTermSearchBean.loadHierachy}"
                                                              inlineStyle="height:10px; width:20px;" partialSubmit="true"/>
                                        </af:column>
                                        <af:dragSource actions="MOVE" discriminant="rowmove"/>
                                        <f:facet name="nodeStamp">
                                                <af:column id="c58" headerText="Term" width="200">
                                                    <af:outputText value="#{row.term}" id="ot29" />
                                                </af:column>
                                            </f:facet>
                                            <f:facet name="pathStamp">
                                                <af:group id="g9">
                                                    <af:outputText value="#{row}" id="ot60"/>
                                                </af:group>
                                            </f:facet>
                                    </af:treeTable>
                                        <!-- SEARCH -->
                                        <af:panelCollection id="pc3" inlineStyle="width:521px;">
                                            <f:facet name="menus">
                                               <af:menu text="Filter and Sort" id="m1" detachable="true" inlineStyle="padding:1px;">
                                                <af:toolbar id="t6">
                                                    <af:panelFormLayout id="pfl3a">
                                                        <af:selectOneChoice label="Sort" value="SCOPE" id="soc7"
                                                                            
                                                                            autoSubmit="true"
                                                                            valueChangeListener="#{pageFlowScope.NMQSourceTermSearchBean.sortChanged}"
                                                                            binding="#{NMQSourceTermSearchUIBean.cntrlSortList}">
                                                            <af:selectItem label="Term Name" value="TERM" id="si14"/>
                                                            <af:selectItem label="Level" value="DEF_LEVEL_REF_SHORT_NAME" id="si15"/>
                                                            <af:selectItem label="Scope" value="SCOPE" id="si16"/>
                                                        </af:selectOneChoice>
                                                        <af:selectBooleanCheckbox label="Show Primary Only" id="sbc1" value="false" autoSubmit="true"
                                                                                  
                                                                                  valueChangeListener="#{pageFlowScope.NMQSourceTermSearchBean.showSecondaryPathChanged}"
                                                                                  binding="#{NMQSourceTermSearchUIBean.ctrlReturnPrimLinkPath}"/>
                                                        
                                                        
                                                        <af:selectOneChoice label="Scope" id="soc5"
                                                                            
                                                                            labelStyle="white-space:nowrap" value="0" autoSubmit="true"
                                                                            valuePassThru="true"
                                                                            valueChangeListener="#{pageFlowScope.NMQSourceTermSearchBean.scopeChanged}"
                                                                            binding="#{NMQSourceTermSearchUIBean.cntrlScope}">
                                                            <af:selectItem label="Full #{applicationScope.CSMQBean.customMQName}/SMQ" value="0"
                                                                           id="si5"/>
                                                            <af:selectItem label="Child Narrow" value="3" id="si6"/>
                                                        </af:selectOneChoice>
                                                    </af:panelFormLayout>
                                                </af:toolbar>
                                            </af:menu>
                                                
                                             
                                            </f:facet>
                                            <f:facet name="toolbar">
                                            <af:toolbar id="t7">
                                                <af:commandToolbarButton text="Refresh" id="ctb15"
                                                         actionListener="#{pageFlowScope.NMQSourceTermSearchBean.loadHierachy}"
                                                         icon="/image/hierarchy/REFRESH.png" disabled="false"
                                                />
                                            </af:toolbar>
                                            </f:facet>
                                            <f:facet name="statusbar"/>
                                            <af:treeTable value="#{pageFlowScope.TermHierarchySourceBean.treemodel}" var="node"
                                                          rowSelection="multiple" id="hierSrc" styleClass="AFStretchWidth"
                                                          binding="#{pageFlowScope.ImpactAnalysisBean.hierarchySourceTree}"
                                                          columnStretching="column:c14" inlineStyle="height:303px;" initiallyExpanded="false"
                                                          fetchSize="-1" width="521"
                                                          visible="#{pageFlowScope.NMQSourceTermSearchBean.showHierarchyChildTree}"
                                                          partialTriggers=":::cb2 :::tt5:cb4">
                                                <f:facet name="nodeStamp">
                                                    <af:column id="c14" headerText="#{node.term}" width="200" noWrap="false">
                                                        <af:panelGroupLayout id="pgl5" halign="left">
                                                            <af:outputText value="#{node.term}" id="ot1"
                                                                           styleClass="#{node.style}"
                                                                           rendered="#{!node.showHasChildrenButton}"/>
                                                            <af:commandLink text="#{node.term}" id="cl2"
                                                                            actionListener="#{pageFlowScope.TermHierarchySourceBean.expandHierarchyChildren}"
                                                                            rendered="#{node.showHasChildrenButton}"
                                                                            partialSubmit="true"/>
                                                        </af:panelGroupLayout>
                                                    </af:column>
                                                </f:facet>
                                                <f:facet name="pathStamp">
                                                    <af:group id="g4">
                                                        <af:outputText value="#{node}" id="ot12"/>
                                                    </af:group>
                                                </f:facet>
                                                <af:column headerText="Hierarchy Details" id="c15" width="572">
                                                    <af:column id="c26" headerText="Code" width="50" sortable="true" filterable="true">
                                                        <af:outputText value="#{node.dictContentCode}" id="ot26"/>
                                                    </af:column>
                                                    <af:column id="c18" headerText="Level" width="50" sortable="true" filterable="true">
                                                        <af:outputText value="#{node.levelName}" id="ot14"/>
                                                    </af:column>
                                                    <af:column id="c17" headerText="Scope" width="50" sortable="true" filterable="true">
                                                        <af:outputText value="#{node.scopeName}" id="ot13"/>
                                                    </af:column>
                                                </af:column>
                                                <af:dragSource actions="MOVE" discriminant="rowmove"/>
                                            </af:treeTable>
                                        </af:panelCollection>
                                        <!-- TREE SEARCH END -->
                                    </af:panelGroupLayout>
                                </af:dialog>
                            </af:popup>
                            
                            
                            <!-- ***    IMPACT SEARCH RESULTS  ************************** -->
                            <af:popup id="p3" binding="#{ImpactAnalysisUIBean.impactSearchPopUp}"
                                      launcherVar="PUSR"
                                      popupFetchListener="#{pageFlowScope.ImpactAnalysisBean.impactSearchResultsPopUp}">
                                <af:dialog type="cancel" closeIconVisible="true" title="Impact Search" id="d8" stretchChildren="none" modal="true"
                                           resize="off">
                                    <af:panelGroupLayout id="pgl6" layout="vertical">
                                    <af:panelGroupLayout id="pgl161" layout="horizontal">
                                            <af:selectManyChoice label="Product" id="smc31" autoSubmit="true"
                                                                 valuePassThru="true"
                                                                 value="#{pageFlowScope.ImpactAnalysisBean.productList}"
                                                                 labelStyle="white-space:nowrap"
                                                                 selectAllVisible="false" contentStyle="color:#000000;"
                                                                 binding="#{pageFlowScope.ImpactAnalysisBean.productComponent}"
                                                                 disabled="#{(pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'IMPACT_SMQ') or (pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'NON_IMPACT_SMQ')}">
                                                <af:forEach items="#{bindings.ViewObj_ProductList1.iteratorBinding.allRowsInRange}"
                                                            var="row">
                                                    <f:selectItem id="groups1" itemLabel="#{row.longValue}"
                                                                  itemValue="#{row.shortVal}"/>
                                                </af:forEach>
                                            </af:selectManyChoice>
                                            <af:spacer width="150" height="10" id="s18"/>
                                            <af:panelGroupLayout id="pgl19"
                                                                 binding="#{pageFlowScope.ImpactAnalysisBean.buttonGroup}">
                                                <af:commandButton text="Export Impacted CMQ Search" id="b11"
                                                                  icon="/image/EXCEL.png"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'IMPACT_CMQ'}">
                                                    <af:fileDownloadActionListener contentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                                                                   filename="ImpactSearchReport.xls"
                                                                                   method="#{pageFlowScope.ImpactAnalysisBean.downloadSearchReportForImpactedCMQ}"/>
                                                </af:commandButton>
                                                <af:commandButton text="Export Impacted NMQ Search" id="cb7"
                                                                  icon="/image/EXCEL.png"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'IMPACT_NMQ'}">
                                                    <af:fileDownloadActionListener contentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                                                                   filename="ImpactSearchReport.xls"
                                                                                   method="#{pageFlowScope.ImpactAnalysisBean.downloadSearchReportForImpactedNMQ}"/>
                                                </af:commandButton>
                                                <af:commandButton text="Export Impacted SMQ Search" id="cb8"
                                                                  icon="/image/EXCEL.png"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'IMPACT_SMQ'}">
                                                    <af:fileDownloadActionListener contentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                                                                   filename="ImpactSearchReport.xls"
                                                                                   method="#{pageFlowScope.ImpactAnalysisBean.downloadSearchReportForImpactedSMQ}"/>
                                                </af:commandButton>
                                                <af:commandButton text="Export Non-Impacted CMQ Search" id="cb9"
                                                                  icon="/image/EXCEL.png"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'NON_IMPACT_CMQ'}">
                                                    <af:fileDownloadActionListener contentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                                                                   filename="ImpactSearchReport.xls"
                                                                                   method="#{pageFlowScope.ImpactAnalysisBean.downloadSearchReportForNonImpactedCMQ}"/>
                                                </af:commandButton>
                                                <af:commandButton text="Export Non-Impacted NMQ Search" id="cb10"
                                                                  icon="/image/EXCEL.png"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'NON_IMPACT_NMQ'}">
                                                    <af:fileDownloadActionListener contentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                                                                   filename="ImpactSearchReport.xls"
                                                                                   method="#{pageFlowScope.ImpactAnalysisBean.downloadSearchReportForNonImpactedNMQ}"/>
                                                </af:commandButton>
                                                <af:commandButton text="Export Non-Impacted SMQ Search" id="cb12"
                                                                  icon="/image/EXCEL.png"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'NON_IMPACT_SMQ'}">
                                                    <af:fileDownloadActionListener contentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                                                                   filename="ImpactSearchReport.xls"
                                                                                   method="#{pageFlowScope.ImpactAnalysisBean.downloadSearchReportForNonImpactedSMQ}"/>
                                                </af:commandButton>
                                            </af:panelGroupLayout>
                                        </af:panelGroupLayout>
                                            <af:spacer width="10" height="10" id="s22"/>
                                            <af:panelGroupLayout id="pgl8" layout="horizontal">
                                                <af:selectOneChoice id="soc61" label="State"
                                                                    value="#{pageFlowScope.ImpactAnalysisBean.searchStateStr}"
                                                                    autoSubmit="true"
                                                                    binding="#{pageFlowScope.ImpactAnalysisBean.stateComponent}">
                                                    <af:selectItem label="" value="%" id="si81"/>
                                                    <af:selectItem label="Pending Impact Assessment"
                                                                   value="Pending Impact Assessment" id="si461"/>
                                                    <af:selectItem label="Reviewed IA" value="Reviewed IA" id="si421"/>
                                                    <af:selectItem label="Approved IA" value="Approved IA" id="si431"/>
                                                    <af:selectItem label="Published IA" value="Published IA" id="si441"/>
                                                </af:selectOneChoice>
                                                <af:spacer width="10" height="10" id="s161"/>
                                                <af:selectOneChoice label="Status" id="smc61"
                                                                    labelStyle="white-space:nowrap"
                                                                    value="#{pageFlowScope.ImpactAnalysisBean.searchStatusStr}"
                                                                    autoSubmit="true"
                                                                    binding="#{pageFlowScope.ImpactAnalysisBean.statusComponent}">
                                                    <af:selectItem label="" value="%" id="si191"/>
                                                    <af:selectItem label="Active" value="A" id="si19a1"/>
                                                    <af:selectItem label="Inactive" value="I" id="si41"/>
                                                </af:selectOneChoice>
                                            </af:panelGroupLayout>
                                            <af:spacer width="10" height="10" id="s41"/>
                                            <af:panelGroupLayout id="pgl16" layout="horizontal">
                                                <af:inputText label="Term " columns="35" id="it21"
                                                              value="#{pageFlowScope.ImpactAnalysisBean.searchTermStr}"
                                                              binding="#{pageFlowScope.ImpactAnalysisBean.termComponent}"/>
                                                <af:spacer width="10" height="10" id="s71"/>
                                                <af:inputText label="Code " columns="10" id="it51"
                                                              value="#{pageFlowScope.ImpactAnalysisBean.searchCodeStr}"
                                                              binding="#{pageFlowScope.ImpactAnalysisBean.termCodeComponent}"/>
                                                <af:spacer width="10" height="10" id="s141"/>
                                            <af:panelGroupLayout id="pgl20"
                                                                 binding="#{pageFlowScope.ImpactAnalysisBean.searchButtonGroup}">
                                                <af:commandButton text="Search" id="cb11" partialSubmit="true"
                                                                  actionListener="#{pageFlowScope.ImpactAnalysisBean.onImpactAssesmentSearchCMQAction}"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'IMPACT_CMQ'}"/>
                                                <af:commandButton text="Search" id="cb13" partialSubmit="true"
                                                                  actionListener="#{pageFlowScope.ImpactAnalysisBean.onImpactAssesmentSearchNMQAction}"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'IMPACT_NMQ'}"/>
                                                <af:commandButton text="Search" id="cb14" partialSubmit="true"
                                                                  actionListener="#{pageFlowScope.ImpactAnalysisBean.onImpactAssesmentSearchSMQAction}"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'IMPACT_SMQ'}"/>
                                                <af:commandButton text="Search" id="cb15" partialSubmit="true"
                                                                  actionListener="#{pageFlowScope.ImpactAnalysisBean.onImpactAssesmentSearchNonCMQAction}"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'NON_IMPACT_CMQ'}"/>
                                                <af:commandButton text="Search" id="cb16" partialSubmit="true"
                                                                  actionListener="#{pageFlowScope.ImpactAnalysisBean.onImpactAssesmentSearchNonNMQAction}"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'NON_IMPACT_NMQ'}"/>
                                                <af:commandButton text="Search" id="cb17" partialSubmit="true"
                                                                  actionListener="#{pageFlowScope.ImpactAnalysisBean.onImpactAssesmentSearchNonSMQAction}"
                                                                  rendered="#{pageFlowScope.ImpactAnalysisBean.currentImpactedDownloadFlat eq 'NON_IMPACT_SMQ'}"/>
                                            </af:panelGroupLayout>
                                        </af:panelGroupLayout>
                                            <af:spacer width="10" height="10" id="s15"/>
                                        </af:panelGroupLayout>
                                    <af:panelTabbed id="pt2" inlineStyle="width:503px; height:381px;"
                                                    partialTriggers="cb11 cb13 cb14 cb15 cb16 cb17">
                                        <af:showDetailItem text="Impacted CMQs" id="sdi5" styleClass="AFStretchWidth"
                                                           disclosed="true"
                                                           disclosureListener="#{pageFlowScope.ImpactAnalysisBean.impactedCMQSelection}">
                                            <af:table value="#{bindings.ImpactSearchListVO_CMQ_Y.collectionModel}"
                                                      var="row" rows="#{bindings.ImpactSearchListVO_CMQ_Y.rangeSize}"
                                                      emptyText="#{bindings.ImpactSearchListVO_CMQ_Y.viewable ? 'No data to display.' : 'Access Denied.'}"
                                                      fetchSize="#{bindings.ImpactSearchListVO_CMQ_Y.rangeSize}"
                                                      rowSelection="single"
                                                      selectionListener="#{pageFlowScope.ImpactAnalysisBean.rowSelected}"
                                                      inlineStyle="height:335px;"
                                                      rowBandingInterval="0" id="T_CMQ_Y"
                                                      binding="#{ImpactAnalysisUIBean.cntrlSearchResultsTBL_CMQ_Y}"
                                                      columnStretching="column:c46" styleClass="AFStretchWidth">
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_Y.hints.Term.name}"
                                                           sortable="false"
                                                           headerText="Term"
                                                           id="c46" filterable="true">
                                                    <af:outputText value="#{row.Term}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_Y.hints.Term.tooltip}"
                                                                   id="ot48"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_Y.hints.DictContentCode.name}"
                                                           sortable="false"
                                                           headerText="MQ Code" width="50"
                                                           id="c47">
                                                    <af:outputText value="#{row.DictContentCode}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_Y.hints.DictContentCode.tooltip}"
                                                                   id="ot49"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_Y.hints.Status.name}"
                                                           sortable="false"
                                                           headerText="Status" width="45"
                                                           id="c48">
                                                    <af:outputText value="#{row.Status}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_Y.hints.Status.tooltip}"
                                                                   id="ot50"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_Y.hints.WorkflowState.name}"
                                                           sortable="false"
                                                           headerText="State" width="50"
                                                           id="c49">
                                                    <af:outputText value="#{row.WorkflowState}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_Y.hints.WorkflowState.tooltip}"
                                                                   id="ot51"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_Y.hints.ReleaseGroup.name}"
                                                           sortable="false" width="50"
                                                           headerText="Release Group"
                                                           id="c50">
                                                    <af:outputText value="#{row.ReleaseGroup}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_Y.hints.ReleaseGroup.tooltip}"
                                                                   id="ot52"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_Y.hints.DictContentId.name}"
                                                           sortable="false" rendered="false" width="50"
                                                           headerText="ID"
                                                           id="c51">
                                                    <af:outputText value="#{row.DictContentId}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_Y.hints.DictContentId.tooltip}"
                                                                   id="ot53">
                                                        <af:convertNumber groupingUsed="false"
                                                                          pattern="#{bindings.ImpactSearchListVO_CMQ_Y.hints.DictContentId.format}"/>
                                                    </af:outputText>
                                                </af:column>
                                            </af:table>
                                        </af:showDetailItem>
                                        <af:showDetailItem text="Impacted NMQs" styleClass="AFStretchWidth"
                                                           id="sdi4"
                                                           disclosureListener="#{pageFlowScope.ImpactAnalysisBean.impactedNMQSelection}">
                                            <af:table value="#{bindings.ImpactSearchListVO_NMQ_Y.collectionModel}"
                                                      var="row" rows="#{bindings.ImpactSearchListVO_NMQ_Y.rangeSize}"
                                                      emptyText="#{bindings.ImpactSearchListVO_NMQ_Y.viewable ? 'No data to display.' : 'Access Denied.'}"
                                                      fetchSize="#{bindings.ImpactSearchListVO_NMQ_Y.rangeSize}"
                                                      rowBandingInterval="0"
                                                      
                                                      selectionListener="#{pageFlowScope.ImpactAnalysisBean.rowSelected}"
                                                      rowSelection="single" id="TBL_NMQ_Y" inlineStyle="height:335px;"
                                                      styleClass="AFStretchWidth" columnStretching="column:c40"
                                                      binding="#{ImpactAnalysisUIBean.cntrlSearchResultsTBL_NMQ_Y}">
                                                <af:column headerText="Term" id="c40" filterable="true">
                                                    <af:outputText value="#{row.Term}" id="ot42"/>
                                                </af:column>
                                                <af:column headerText="MQ Code" id="c41" width="50" filterable="true">
                                                    <af:outputText value="#{row.DictContentCode}" id="ot43"/>
                                                </af:column>
                                                <af:column headerText="Status" id="c42" width="45" filterable="true">
                                                    <af:outputText value="#{row.Status}" id="ot44"/>
                                                </af:column>
                                                <af:column id="c43" headerText="State" width="50">
                                                    <af:outputText value="#{row.WorkflowState}" id="ot45"/>
                                                </af:column>
                                                <af:column sortable="true" headerText="Release Group" id="c44"
                                                           width="50">
                                                    <af:outputText value="#{row.ReleaseGroup}" id="ot46"/>
                                                </af:column>
                                                <af:column headerText="ID" id="c45" rendered="false">
                                                    <af:outputText value="#{row.DictContentId}" id="ot47">
                                                        <af:convertNumber groupingUsed="false"
                                                                          pattern="#{bindings.ImpactSearchListVO_NMQ_Y.hints.DictContentId.format}"/>
                                                    </af:outputText>
                                                </af:column>
                                            </af:table>
                                        </af:showDetailItem>
                                        <af:showDetailItem text="Impacted SMQs" id="sdi2" inlineStyle="height:335px;"
                                                           disclosureListener="#{pageFlowScope.ImpactAnalysisBean.impactedSMQSelection}">
                                            <af:table value="#{bindings.ImpactSearchListVO_MQ_Y.collectionModel}"
                                                      var="row" rows="#{bindings.ImpactSearchListVO_MQ_Y.rangeSize}"
                                                      emptyText="#{bindings.ImpactSearchListVO_MQ_Y.viewable ? 'No data to display.' : 'Access Denied.'}"
                                                      fetchSize="#{bindings.ImpactSearchListVO_MQ_Y.rangeSize}"
                                                      rowBandingInterval="0" id="TBL_MQ_Y"
                                                      selectionListener="#{pageFlowScope.ImpactAnalysisBean.rowSelected}"
                                                      rowSelection="single" inlineStyle="height:335px;"
                                                      styleClass="AFStretchWidth" columnStretching="column:c22"
                                                      binding="#{ImpactAnalysisUIBean.cntrlSearchResultsTBL_MQ_Y}">
                                                <af:column headerText="Term" id="c22" filterable="true">
                                                    <af:outputText value="#{row.Term}" id="ot30"/>
                                                </af:column>
                                                <af:column headerText="MQ Code" id="c29" width="50" filterable="true">
                                                    <af:outputText value="#{row.DictContentCode}" id="ot31"/>
                                                </af:column>
                                                <af:column headerText="Status" id="c30" width="45" filterable="true">
                                                    <af:outputText value="#{row.Status}" id="ot32"/>
                                                </af:column>
                                                <af:column id="c31" headerText="State" width="50">
                                                    <af:outputText value="#{row.WorkflowState}" id="ot33"/>
                                                </af:column>
                                                <af:column sortable="true" headerText="Release Group" id="c32"
                                                           width="50">
                                                    <af:outputText value="#{row.ReleaseGroup}" id="ot34"/>
                                                </af:column>
                                                <af:column headerText="ID" id="c33" rendered="false">
                                                    <af:outputText value="#{row.DictContentId}" id="ot35">
                                                        <af:convertNumber groupingUsed="false"
                                                                          pattern="#{bindings.ImpactSearchListVO_MQ_Y.hints.DictContentId.format}"/>
                                                    </af:outputText>
                                                </af:column>
                                            </af:table>
                                        </af:showDetailItem>
                                        <af:showDetailItem text="Non-impacted CMQs" id="sdi6" styleClass="AFStretchWidth"
                                                           disclosureListener="#{pageFlowScope.ImpactAnalysisBean.nonImpactedCMQSelection}">
                                            <af:table value="#{bindings.ImpactSearchListVO_CMQ_N.collectionModel}"
                                                      var="row" rows="#{bindings.ImpactSearchListVO_CMQ_N.rangeSize}"
                                                      emptyText="#{bindings.ImpactSearchListVO_CMQ_N.viewable ? 'No data to display.' : 'Access Denied.'}"
                                                      fetchSize="#{bindings.ImpactSearchListVO_CMQ_N.rangeSize}"
                                                      rowBandingInterval="0"
                                                      selectedRowKeys="#{bindings.ImpactSearchListVO_CMQ_N.collectionModel.selectedRow}"
                                                      selectionListener="#{pageFlowScope.ImpactAnalysisBean.rowSelected}"
                                                      rowSelection="single" id="T_CMQ_N"
                                                      inlineStyle="height:335px;"
                                                      columnStretching="column:c52"
                                                      binding="#{ImpactAnalysisUIBean.cntrlSearchResultsTBL_CMQ_N}"
                                                      styleClass="AFStretchWidth">
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_N.hints.Term.name}"
                                                           sortable="false"
                                                           headerText="Term"
                                                           id="c52" filterable="true">
                                                    <af:outputText value="#{row.Term}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_N.hints.Term.tooltip}"
                                                                   id="ot54"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_N.hints.DictContentCode.name}"
                                                           sortable="false"
                                                           headerText="MQ Code" width="50"
                                                           id="c53">
                                                    <af:outputText value="#{row.DictContentCode}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_N.hints.DictContentCode.tooltip}"
                                                                   id="ot55"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_N.hints.Status.name}"
                                                           sortable="false"
                                                           headerText="Status" width="45"
                                                           id="c54">
                                                    <af:outputText value="#{row.Status}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_N.hints.Status.tooltip}"
                                                                   id="ot56"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_N.hints.WorkflowState.name}"
                                                           sortable="false"
                                                           headerText="State" width="50"
                                                           id="c55">
                                                    <af:outputText value="#{row.WorkflowState}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_N.hints.WorkflowState.tooltip}"
                                                                   id="ot57"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_N.hints.ReleaseGroup.name}"
                                                           sortable="false"
                                                           headerText="Release Group" width="50"
                                                           id="c56">
                                                    <af:outputText value="#{row.ReleaseGroup}"
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_N.hints.ReleaseGroup.tooltip}"
                                                                   id="ot58"/>
                                                </af:column>
                                                <af:column sortProperty="#{bindings.ImpactSearchListVO_CMQ_N.hints.DictContentId.name}"
                                                           sortable="false" rendered="false"
                                                           headerText="ID" width="50"
                                                           id="c57">
                                                    <af:outputText value="#{row.DictContentId}" 
                                                                   shortDesc="#{bindings.ImpactSearchListVO_CMQ_N.hints.DictContentId.tooltip}"
                                                                   id="ot59">
                                                        <af:convertNumber groupingUsed="false"
                                                                          pattern="#{bindings.ImpactSearchListVO_CMQ_N.hints.DictContentId.format}"/>
                                                    </af:outputText>
                                                </af:column>
                                            </af:table>
                                        </af:showDetailItem>
                                        <af:showDetailItem text="Non-impacted NMQs"
                                                           id="sdi3" styleClass="AFStretchWidth"
                                                           disclosureListener="#{pageFlowScope.ImpactAnalysisBean.nonImpactedNMQSelection}">
                                            <af:table value="#{bindings.ImpactSearchListVO_NMQ_N.collectionModel}"
                                                      var="row" rows="#{bindings.ImpactSearchListVO_NMQ_N.rangeSize}"
                                                      emptyText="#{bindings.ImpactSearchListVO_NMQ_N.viewable ? 'No data to display.' : 'Access Denied.'}"
                                                      fetchSize="#{bindings.ImpactSearchListVO_NMQ_N.rangeSize}"
                                                      rowBandingInterval="0"
                                                      
                                                      selectionListener="#{pageFlowScope.ImpactAnalysisBean.rowSelected}"
                                                      rowSelection="single" id="TBL_NMQ_N" inlineStyle="height:335px;"
                                                      styleClass="AFStretchWidth" columnStretching="column:c34"
                                                      binding="#{ImpactAnalysisUIBean.cntrlSearchResultsTBL_NMQ_N}">
                                                <af:column headerText="Term" id="c34" filterable="true">
                                                    <af:outputText value="#{row.Term}" id="ot36"/>
                                                </af:column>
                                                <af:column headerText="MQ Code" id="c35" width="50" filterable="true">
                                                    <af:outputText value="#{row.DictContentCode}" id="ot37"/>
                                                </af:column>
                                                <af:column headerText="Status" id="c36" width="45" filterable="true">
                                                    <af:outputText value="#{row.Status}" id="ot38"/>
                                                </af:column>
                                                <af:column id="c37" headerText="State" width="50">
                                                    <af:outputText value="#{row.WorkflowState}" id="ot39"/>
                                                </af:column>
                                                <af:column sortable="true" headerText="Release Group" id="c38"
                                                           width="50">
                                                    <af:outputText value="#{row.ReleaseGroup}" id="ot40"/>
                                                </af:column>
                                                <af:column headerText="ID" id="c39" rendered="false">
                                                    <af:outputText value="#{row.DictContentId}" id="ot41">
                                                        <af:convertNumber groupingUsed="false"
                                                                          pattern="#{bindings.ImpactSearchListVO_NMQ_N.hints.DictContentId.format}"/>
                                                    </af:outputText>
                                                </af:column>
                                            </af:table>
                                        </af:showDetailItem>
                                        <af:showDetailItem text="Non-impacted SMQs" id="sdi1"
                                                           disclosureListener="#{pageFlowScope.ImpactAnalysisBean.nonImpactedSMQSelection}">
                                            <af:table value="#{bindings.ImpactSearchListVO_MQ_N.collectionModel}"
                                                      var="row" rows="#{bindings.ImpactSearchListVO_MQ_N.rangeSize}"
                                                      emptyText="#{bindings.ImpactSearchListVO_MQ_N.viewable ? 'No data to display.' : 'Access Denied.'}"
                                                      fetchSize="#{bindings.ImpactSearchListVO_MQ_N.rangeSize}"
                                                      rowBandingInterval="0"
                                                      
                                                      selectionListener="#{pageFlowScope.ImpactAnalysisBean.rowSelected}"
                                                      rowSelection="single" id="TBL_MQ_N" inlineStyle="height:335px;"
                                                      styleClass="AFStretchWidth" columnStretching="column:c9"
                                                      binding="#{ImpactAnalysisUIBean.cntrlSearchResultsTBL_MQ_N}">
                                            <af:column  headerText="Term" id="c9" filterable="true">
                                                <af:outputText value="#{row.Term}" id="ot5"/>
                                            </af:column>
                                            <af:column headerText="MQ Code" id="c10" width="50" filterable="true">
                                                <af:outputText value="#{row.DictContentCode}" id="ot7"/>
                                            </af:column>
                                            <af:column  headerText="Status" id="c11" width="45" filterable="true">
                                                <af:outputText value="#{row.Status}" id="ot8"/>
                                            </af:column>
                                            <af:column id="c16" headerText="State" width="50">
                                                <af:outputText value="#{row.WorkflowState}" id="ot19"/>
                                            </af:column>
                                            <af:column sortable="true" headerText="Release Group" id="c12" width="50" >
                                                <af:outputText value="#{row.ReleaseGroup}" id="ot9"/>
                                            </af:column>
                                            <af:column  headerText="ID" id="c13" rendered="false">
                                                <af:outputText value="#{row.DictContentId}" id="ot10">
                                                    <af:convertNumber groupingUsed="false" pattern="#{bindings.ImpactSearchListVO_MQ_N.hints.DictContentId.format}"/>
                                                </af:outputText>
                                            </af:column>
                                            </af:table>
                                        </af:showDetailItem>
                                    </af:panelTabbed>
                                    <f:facet name="buttonBar">
                                        <af:group id="g8">
                                            <af:panelLabelAndMessage label="Last Updated:" id="plam1">
                                                <af:outputText value="#{bindings.LastUpdate.inputValue}" id="ot27"/>
                                            </af:panelLabelAndMessage>
                                        </af:group>
                                    </f:facet>
                                </af:dialog>
                            </af:popup>
                            
                            <!-- ***  NEW PTs ****************************************** -->
                            
                            <af:popup id="p5" binding="#{ImpactAnalysisUIBean.newPreferedTermsPopup}"
                                      popupFetchListener="#{pageFlowScope.ImpactAnalysisBean.newPTPopUpFetch}">
                                <af:dialog type="cancel" closeIconVisible="true" title="New Preferred Terms" id="d9" stretchChildren="none"
                                           modal="false" resize="off" inlineStyle="margin:5px;">
                                    <af:panelGroupLayout id="pgl22" inlineStyle="height:320px; padding:5px; margin:5px;">
                                        <af:panelGroupLayout id="pgl1" layout="horizontal">
                                            <af:selectManyChoice value="#{pageFlowScope.ImpactAnalysisBean.socList}"
                                                                 label="SOC" id="smc1"
                                                                 binding="#{ImpactAnalysisUIBean.cntlSOCList}"
                                                                 valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.SOCChanged}"
                                                                 valuePassThru="true" contentStyle="width:300px;">
                                                <f:selectItems value="#{bindings.SOCsWithNewPTsVO1.items}" id="si8"/>
                                            </af:selectManyChoice>
                                            <af:commandButton text="Search" id="cb1"
                                                              actionListener="#{pageFlowScope.ImpactAnalysisBean.refreshNewPTList}"
                                                              partialSubmit="true"/>
                                        </af:panelGroupLayout>
                                        <af:spacer width="10" height="10" id="s7"/>
                                        <af:treeTable value="#{pageFlowScope.NewPTListBean.treemodel}" var="node" rowSelection="multiple" id="ptList" width="387"
                                                      binding="#{pageFlowScope.ImpactAnalysisBean.preferedTermSourceTree}"
                                                      inlineStyle="height:303px;" initiallyExpanded="false" fetchSize="20" partialTriggers="::smc1" columnStretching="c21"
                                                      disclosedRowKeys="#{pageFlowScope.ImpactAnalysisBean.newPTDisclosedKeys}">
                                            <f:facet name="nodeStamp"/>
                                            <f:facet name="pathStamp">
                                                <af:group id="g7">
                                                    <af:outputText value="#{node}" id="ot22"/>
                                                </af:group>
                                            </f:facet>
                                            <af:column id="c21" headerText="#{node.term}" width="250">
                                                <af:outputText value="#{node.term}" id="ot21"/>
                                                <f:facet name="header">
                                                    <af:outputText value="Term" id="ot4"/>
                                                </f:facet>
                                            </af:column>
                                            <af:column id="c23" headerText="Level" width="50" sortable="true" filterable="true">
                                                <af:outputText value="#{node.levelName}" id="ot23"/>
                                            </af:column>
                                            <af:column id="c24" headerText="Scope" width="50" sortable="true" filterable="true" rendered="false">
                                                <af:outputText value="#{node.scopeName}" id="ot24"/>
                                            </af:column>
                                            <af:dragSource actions="MOVE" discriminant="rowmove"/>
                                            <f:facet name="header"/>
                                        </af:treeTable>
                                    </af:panelGroupLayout>
                                    <!-- TREE SEARCH END -->
                                </af:dialog>
                            </af:popup>
                            <af:panelBox text="Impact Assessment" id="pb1" showDisclosure="false"
                                         inlineStyle="width:1250px; padding:5px; height:390px;">
                                <af:panelGroupLayout id="pgl4" layout="horizontal" inlineStyle="height:355px; width:1230px; padding:5px;"
                                                     valign="top">
                                    <af:panelCollection id="pc2" inlineStyle="height:345px; width:515px; padding:0px;">
                                            <f:facet name="menus">
                                            <af:menu text="Filter and Sort" id="m2" detachable="true"
                                                     binding="#{ImpactAnalysisUIBean.cntrlExistingMenu}">
                                                <af:panelFormLayout id="pfl2a" inlineStyle="height:97px;">
                                                        
                                                        <af:selectBooleanCheckbox label="Show Impacted Only" id="paramMedDRASIO" autoSubmit="true"
                                                                                valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.existingParamsChanged}"
                                                                                  selected="false"
                                                                                  binding="#{ImpactAnalysisUIBean.cntrlShowImpactedFilterExisting}"/>
                                                        <af:selectBooleanCheckbox label="Show Primary Only" id="paramMedDRASPO" autoSubmit="true"
                                                                                valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.existingParamsChanged}"
                                                                                  binding="#{ImpactAnalysisUIBean.cntrlShowPrimaryFilterExisting}"/>
                                                        <af:selectOneChoice label="Sort"  id="paramMedDRASort"
                                                                                autoSubmit="true"
                                                                                valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.existingParamsChanged}"
                                                                                valuePassThru="true" value="SCOPE"
                                                                            binding="#{ImpactAnalysisUIBean.cntrlShowSortFilterExisting}">
                                                                <af:selectItem label="Term Name" value="TERM" id="si18"/>
                                                                <af:selectItem label="Level" value="DEF_LEVEL_REF_SHORT_NAME" id="si21"/>
                                                                <af:selectItem label="Scope" value="SCOPE" id="si20"/>
                                                            </af:selectOneChoice>
                                                    <af:commandToolbarButton text="Refresh" id="ctb10"
                                                                             actionListener="#{pageFlowScope.ImpactAnalysisBean.refreshMedDRATree}"
                                                                             icon="/image/hierarchy/REFRESH.png"/>
                                                </af:panelFormLayout>
                                            </af:menu>
                                        </f:facet>
                                            <f:facet name="toolbar">
                                                <af:toolbar id="t4" binding="#{ImpactAnalysisUIBean.cntrlImpactLeftToolbar}">
                                                <af:commandToolbarButton text="Select MQ" id="cb5" partialSubmit="true" icon="/image/table_go.png"
                                                                         actionListener="#{pageFlowScope.ImpactAnalysisBean.openSelectMQPopup}">
                                                        <!--<af:showPopupBehavior popupId="::p3" triggerType="click"/>-->
                                                    </af:commandToolbarButton>
                                                <af:commandToolbarButton text="Export Displayed" icon="/image/EXCEL.png" id="ctb12"
                                                                         binding="#{ImpactAnalysisUIBean.cntrlExportDisplayedButtonLeft}" disabled="true" rendered="false">
                                                    <af:exportCollectionActionListener exportedId="hTable" type="excelHTML" title="#{pageFlowScope.ImpactAnalysisBean.currentTermName}" filename="#{pageFlowScope.ImpactAnalysisBean.currentTermName}.xls"
                                                                                       exportedRows="all"/>
                                                </af:commandToolbarButton>
                                            </af:toolbar>
                                            </f:facet>
                                            <af:treeTable value="#{pageFlowScope.MedDRAImpactHierarchyBean.treemodel}" var="node"
                                                          rowSelection="multiple" id="hTable" width="504"
                                                          binding="#{pageFlowScope.ImpactAnalysisBean.medDRATree}" columnStretching="column:column1"
                                                          inlineStyle="height:400px;" initiallyExpanded="false" fetchSize="20">
                                                <f:facet name="nodeStamp">
                                                    <af:column id="column1" headerText="#{node.term}" width="200"
                                                               inlineStyle="height:18px; white-space:nowrap;" headerNoWrap="true" noWrap="true"
                                                               rendered="#{pageFlowScope.MedDRAImpactHierarchyBean.hasData}">
                                                        <af:panelGroupLayout id="pgl2" halign="left">
                                                            <af:image id="i2" rendered="#{node.icon gt 0}" shortDesc="#{node.description}"
                                                                      source="/image/impact/#{node.icon}.png"/>
                                                            <af:spacer width="4" height="0" id="s17"/>
                                                            <af:outputText value="#{node.term}" id="ot18" styleClass="#{node.style}"
                                                                           rendered="#{node.rendered and !node.showHasChildrenButton}"
                                                                           shortDesc="#{node.path}"/>
                                                            <af:commandLink text="#{node.term}" id="cl1" styleClass="#{node.style}"
                                                                            shortDesc="#{node.path}"
                                                                            actionListener="#{pageFlowScope.MedDRAImpactHierarchyBean.expandChildren}"
                                                                            rendered="#{node.rendered and node.showHasChildrenButton}"
                                                                            partialSubmit="true"/>
                                                        </af:panelGroupLayout>
                                                        <f:facet name="header">
                                                            <af:group id="g3">
                                                                <af:outputText value="Existing #{applicationScope.CSMQBean.customMQName}/SMQ"
                                                                               id="ot17" inlineStyle="font-size:12px; vertical-align:middle;"/>
                                                            </af:group>
                                                        </f:facet>
                                                    </af:column>
                                                </f:facet>
                                                <f:facet name="pathStamp">
                                                    <af:outputText value="#{node}" id="outputText2"/>
                                                </f:facet>
                                                <af:column headerText="Hierarchy Details" id="column2" width="572"
                                                           rendered="#{pageFlowScope.MedDRAImpactHierarchyBean.hasData}">
                                                <af:column id="c19" headerText="Code" width="50" sortable="true" filterable="true">
                                                    <af:outputText value="#{node.dictContentCode}" id="ot20"/>
                                                </af:column>
                                                <af:column id="column3" headerText="Level" width="50" sortable="true" filterable="true">
                                                        <af:outputText value="#{node.levelName}" id="outputText3"/>
                                                    </af:column>
                                                    <af:column id="column4" headerText="Scope" width="50" sortable="true" filterable="true">
                                                        <af:outputText value="#{node.scopeName}" id="outputText4"/>
                                                    </af:column>
                                                </af:column>
                                            </af:treeTable>
                                        <f:facet name="statusbar">
                                            <af:toolbar id="t8"/>
                                        </f:facet>
                                    </af:panelCollection>
                                        <af:panelCollection id="pc1" inlineStyle="width:679px; height:345px; padding:0px;">
                                            <f:facet name="toolbar">
                                                <af:toolbar id="t2" partialTriggers="fTable" binding="#{ImpactAnalysisUIBean.cntrlImpactRightToolbar}">
                                                    <af:commandToolbarButton text="Hierarchy Search" id="cb6" icon="/image/tree.png"
                                                                             rendered="#{pageFlowScope.FutureImpactHierarchyBean.editable and !(pageFlowScope.ImpactAnalysisBean.currentState eq 'Published IA' or pageFlowScope.ImpactAnalysisBean.currentState eq 'Approved IA')}"
                                                                             disabled="#{pageFlowScope.ImpactAnalysisBean.mqType eq 'MQ'}"
                                                                             partialTriggers="fTable">
                                                        <af:showPopupBehavior popupId="::p2"/>
                                                    </af:commandToolbarButton>
                                                    <af:commandToolbarButton text="New PTs" id="ctb3" icon="/image/PT.png"
                                                                             rendered="#{pageFlowScope.FutureImpactHierarchyBean.editable and !(pageFlowScope.ImpactAnalysisBean.currentState eq 'Published IA' or pageFlowScope.ImpactAnalysisBean.currentState eq 'Approved IA')}"
                                                                             disabled="#{pageFlowScope.ImpactAnalysisBean.mqType eq 'MQ'}"
                                                                             partialTriggers="fTable">
                                                        <af:showPopupBehavior popupId="::p5" align="startBefore"/>
                                                    </af:commandToolbarButton>
                                                    <af:commandToolbarButton text="Delete selected" icon="/image/SMALL_DELETE.png" id="ctb2"
                                                                             rendered="#{pageFlowScope.FutureImpactHierarchyBean.editable and !(pageFlowScope.ImpactAnalysisBean.currentState eq 'Published IA' or pageFlowScope.ImpactAnalysisBean.currentState eq 'Approved IA')}"
                                                                             partialTriggers="fTable"
                                                                             disabled="#{pageFlowScope.ImpactAnalysisBean.mqType eq 'MQ'}">
                                                        <af:showPopupBehavior popupId="::confirm" triggerType="action" align="afterEnd"/>
                                                    </af:commandToolbarButton>
                                                    <af:commandToolbarButton text="Refresh" id="ctb4"
                                                                             actionListener="#{pageFlowScope.ImpactAnalysisBean.refreshFutureTree}"
                                                                             icon="/image/hierarchy/REFRESH.png" disabled="true" binding="#{ImpactAnalysisUIBean.cntrlRefreshButton}"/>
                                                    <af:commandToolbarButton text="Export Displayed" icon="/image/EXCEL.png" id="ctb1" disabled="true"
                                                                             binding="#{ImpactAnalysisUIBean.cntrlExportDisplayedButtonRight}" rendered="false">
                                                        <af:exportCollectionActionListener exportedId="fTable" type="excelHTML"
                                                                                           title="#{pageFlowScope.ImpactAnalysisBean.currentTermName}"
                                                                                           filename="#{pageFlowScope.ImpactAnalysisBean.currentTermName}.xls" exportedRows="all"/>
                                                    </af:commandToolbarButton>
                                                </af:toolbar>
                                            </f:facet>
                                            <af:treeTable value="#{pageFlowScope.FutureImpactHierarchyBean.treemodel}" var="node"
                                                          rowSelection="single" id="fTable" width="664"
                                                          binding="#{pageFlowScope.ImpactAnalysisBean.futureTree}" columnStretching="column:c1"
                                                          inlineStyle="height:400px;" initiallyExpanded="false" fetchSize="20">
                                            <f:facet name="nodeStamp">
                                                    <af:column id="c1"
                                                               headerText="#{bindings.Term.inputValue}#{pageFlowScope.NMQWizardBean.currentTermName}"
                                                               width="200" sortable="true" filterable="true" inlineStyle="height:18px;">
                                                        <af:panelGroupLayout id="pgl3" halign="left">
                                                            <af:image id="i3" rendered="#{node.icon gt 0}" shortDesc="#{node.description}"
                                                                      source="/image/impact/#{node.icon}.png"/>
                                                            <af:spacer width="4" height="0" id="s2"/>
                                                            <af:outputText value="#{node.term}" id="ot11" styleClass="#{node.style}"
                                                                           rendered="#{node.rendered and !node.showHasChildrenButton}"
                                                                           shortDesc="#{node.path}"/>
                                                            <af:commandLink text="#{node.term}" id="cl3" styleClass="#{node.style}"
                                                                            shortDesc="#{node.path}"
                                                                            actionListener="#{pageFlowScope.FutureImpactHierarchyBean.expandChildren}"
                                                                            rendered="#{node.rendered and node.showHasChildrenButton}"
                                                                            partialSubmit="true"/>
                                                        </af:panelGroupLayout>
                                                        <f:facet name="header">
                                                            <af:group id="g6">
                                                                <af:outputText value="Future #{applicationScope.CSMQBean.customMQName}/SMQ" id="ot15"
                                                                               inlineStyle="font-size:12px;"/>
                                                            </af:group>
                                                        </f:facet>
                                                    </af:column>
                                                </f:facet>
                                            <af:collectionDropTarget dropListener="#{pageFlowScope.ImpactAnalysisBean.onTreeDrop}" modelName="rowmove" actions="MOVE"/>
                                            <f:facet name="pathStamp">
                                                    <af:outputText value="#{node}" id="ot2"/>
                                                </f:facet>
                                            <af:column headerText="Hierarchy Details" id="c6" width="572">
                                                <af:column id="c25" headerText="Code" width="50" sortable="true" filterable="true">
                                                    <af:outputText value="#{node.dictContentCode}" id="ot25"/>
                                                </af:column>
                                                <af:column id="c2" headerText="Level" width="50" sortable="true" filterable="true"
                                                               attributeChangeListener="#{pageFlowScope.FutureImpactHierarchyBean.sortByLevel}">
                                                        <af:outputText value="#{node.levelName}" id="ot3"/>
                                                    </af:column>
                                                    <af:column id="c3" headerText="Scope" width="75" sortable="true" filterable="true">
                                                        <af:selectOneChoice id="soc3" value="#{node.formattedScope}" valuePassThru="true"
                                                                            disabled="#{ImpactAssessmentRenderingRulesBean.wizardRelationsDisableDetails or !node.isDirectRelationOrRoot or (pageFlowScope.ImpactAnalysisBean.currentState eq 'Published IA' or pageFlowScope.ImpactAnalysisBean.currentState eq 'Approved IA')}" valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.nodeChanged}" autoSubmit="true" immediate="false">
                                                            <af:selectItem label="Full #{applicationScope.CSMQBean.customMQName}/SMQ" value="0" id="si7"/>
                                                        <af:selectItem label="Broad" value="1" id="si13s"/>
                                                        <af:selectItem label="Narrow" value="2" id="si13d"/>
                                                        <af:selectItem label="Child Narrow" value="3" id="si4"/>
                                                        </af:selectOneChoice>
                                                    </af:column>
                                                    <af:column id="c4" headerText="Category" width="45" sortable="true" filterable="true">
                                                        <af:selectOneChoice id="soc2" value="#{node.termCategory}" valuePassThru="true"
                                                                            disabled="#{ImpactAssessmentRenderingRulesBean.wizardRelationsDisableDetails or !node.isDirectRelationOrRoot or (pageFlowScope.ImpactAnalysisBean.currentState eq 'Published IA' or pageFlowScope.ImpactAnalysisBean.currentState eq 'Approved IA')}" autoSubmit="true" valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.nodeChanged}" immediate="false">
                                                            <af:selectItem label="A" value="A" id="si3"/>
                                                            <af:selectItem label="S" value="S" id="si9"/>
                                                            <af:selectItem label="B" value="B" id="si23"/>
                                                            <af:selectItem label="C" value="C" id="si10"/>
                                                            <af:selectItem label="D" value="D" id="si11"/>
                                                            <af:selectItem label="E" value="E" id="si33"/>
                                                            <af:selectItem label="F" value="F" id="si19"/>
                                                            <af:selectItem label="G" value="G" id="si12"/>
                                                            <af:selectItem label="H" value="H" id="si17"/>
                                                            <af:selectItem label="I" value="I" id="si24"/>
                                                        </af:selectOneChoice>
                                                    </af:column>
                                                    <af:column id="c5" headerText="Weight" width="45" sortable="true" filterable="true">
                                                        <af:inputNumberSpinbox value="#{node.termWeight}" id="ot6" columns="2"
                                                                               disabled="#{ImpactAssessmentRenderingRulesBean.wizardRelationsDisableDetails or !node.isDirectRelationOrRoot or (pageFlowScope.ImpactAnalysisBean.currentState eq 'Published IA' or pageFlowScope.ImpactAnalysisBean.currentState eq 'Approved IA')}" valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.nodeChanged}" autoSubmit="true" immediate="false"/>
                                                    </af:column>
                                                    <af:column id="c7" width="16" rowHeader="true" align="left">
                                                        <af:selectBooleanCheckbox id="sbc2" rendered="#{node.deletable}"
                                                                                  value="#{node.markedForDeletion}" immediate="false"
                                                                                  autoSubmit="true"/>
                                                        <f:facet name="header">
                                                            <af:image source="/image/SMALL_DELETE.png" id="i1" shortDesc="Delete"/>
                                                        </f:facet>
                                                    </af:column>
                                                    <af:column id="c27" width="0" rowHeader="true" align="left" minimumWidth="0" visible="false">
                                                    <af:outputText value="#{node.description}" id="ot28"/>
                                                </af:column>
                                            </af:column>
                                                <!--
                                                ????? STILL USED?
                                                
                                                <f:facet name="contextMenu">
                                                    <af:popup id="p1">
                                                        <af:menu text="menu 1" id="m4">
                                                            <af:commandMenuItem text="Remove term" id="cmi1"
                                                                                actionListener="#{pageFlowScope.FutureImpactHierarchyBean.onTreeNodeDelete}"/>
                                                        </af:menu>
                                                    </af:popup>
                                                </f:facet>-->
                                                <f:facet name="header"/>
                                            </af:treeTable>
                                            <f:facet name="menus">
                                                <af:menu text="Filter and Sort" id="m5" detachable="true"
                                                         binding="#{ImpactAnalysisUIBean.cntrlFutureMenu}">
                                                    <af:toolbar id="t10">
                                                    <af:panelFormLayout id="pfl2">
                                                        
                                                        <af:selectBooleanCheckbox label="Show Impacted Only" id="paramFutureSIO" autoSubmit="true"
                                                                                valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.futureParamsChanged}"
                                                                                  selected="false"
                                                                                  value="#{pageFlowScope.ImpactAnalysisBean.futureShowImpacted}"/>
                                                        <af:selectBooleanCheckbox label="Show Primary Only" id="paramFutureSPO" autoSubmit="true"
                                                                                valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.futureParamsChanged}"/>
                                                        <af:selectOneChoice label="Sort"  id="paramFutureSort"
                                                                                autoSubmit="true"
                                                                                valueChangeListener="#{pageFlowScope.ImpactAnalysisBean.futureParamsChanged}"
                                                                                valuePassThru="true" value="SCOPE">
                                                                <af:selectItem label="Term Name" value="TERM"
                                                                               id="si40"/>
                                                                <af:selectItem label="Level" value="DEF_LEVEL_REF_SHORT_NAME"
                                                                               id="si42"/>
                                                                <af:selectItem label="Scope" value="SCOPE" id="si22"/>
                                                            </af:selectOneChoice>
                                                            
                                                            <af:commandToolbarButton text="Refresh" id="ctb11"
                                                                             actionListener="#{pageFlowScope.ImpactAnalysisBean.refreshFutureTree}"
                                                                             icon="/image/hierarchy/REFRESH.png"/>
                                                        </af:panelFormLayout>
                                                    </af:toolbar>
                                                </af:menu>
                                            </f:facet>
                                        <f:facet name="statusbar">
                                        
                                                <af:toolbar id="t11" binding="#{pageFlowScope.ImpactAnalysisBean.cntrlStatusBar}">
                                                    <af:menuBar id="mb2"/>
                                                    <af:image id="iconError" source="/image/exclamation.png" rendered="true" binding="#{pageFlowScope.ImpactAnalysisBean.iconMQSaveError}"
                                                              visible="false" shortDesc="Error saving MQ"/>
                                                    <af:image id="iconWarn" source="/image/error.png" rendered="true" binding="#{pageFlowScope.ImpactAnalysisBean.iconMQChanged}" visible="false"
                                                              shortDesc="MQ modified"/>
                                                    <af:image id="iconSave" source="/image/accept.png" binding="#{pageFlowScope.ImpactAnalysisBean.iconMQSaved}" rendered="true" visible="false"
                                                              shortDesc="MQ saved"/>
                                                </af:toolbar>
                                         
                                        </f:facet>
                                    </af:panelCollection>
                                </af:panelGroupLayout>
                                <f:facet name="toolbar">
                                    <af:group id="g5">
                                        <af:toolbar id="t3"
                                                    binding="#{ImpactAnalysisUIBean.promotionToolBar}">
                                            <af:commandToolbarButton text="Save" id="ctb5"
                                                                     disabled="#{!pageFlowScope.FutureImpactHierarchyBean.editable or (pageFlowScope.ImpactAnalysisBean.currentState eq 'Published IA' or pageFlowScope.ImpactAnalysisBean.currentState eq 'Approved IA' or pageFlowScope.ImpactAnalysisBean.mqType eq 'MQ')}"
                                                                     actionListener="#{pageFlowScope.ImpactAnalysisBean.updateRelations}" icon="/image/database_save.png"/>
                                            <af:commandToolbarButton text="Review" id="ctb6"
                                                                     shortDesc="Promote to Reviewed"
                                                                     disabled="#{pageFlowScope.ImpactAnalysisBean.currentState ne 'Pending Impact Assessment'}" icon="/image/eyes.png">
                                                <af:showPopupBehavior popupId="::confirmReviewed"/>
                                            </af:commandToolbarButton>
                                            <af:commandToolbarButton text="Approve" id="ctb7"
                                                                     shortDesc="Promote to Approved"
                                                                     disabled="#{pageFlowScope.ImpactAnalysisBean.currentState ne 'Reviewed IA'}" icon="/image/thumb_up.png">
                                                <af:showPopupBehavior popupId="::confirmApproved"/>
                                            </af:commandToolbarButton>
                                            <af:commandToolbarButton text="Demote" id="ctb9" shortDesc="Demote to Pending"
                                                                     disabled="#{pageFlowScope.ImpactAnalysisBean.currentState eq 'Draft' or  pageFlowScope.ImpactAnalysisBean.currentState eq 'Requested' or pageFlowScope.ImpactAnalysisBean.currentState eq 'Proposed' or RenderingRulesBean.wizardConfirmDisableDemoteToDraft}"
                                                                     icon="/image/thumb_down.png">
                                                <af:showPopupBehavior popupId="::confirmDemoteToDraft"/>
                                            </af:commandToolbarButton>
                                            <af:commandToolbarButton text="Delete" id="ctb8"
                                                                     rendered="#{pageFlowScope.ImpactAnalysisBean.renderSave}" icon="/image/decline.png">
                                                <af:showPopupBehavior popupId="::confirmDelete"/>
                                            </af:commandToolbarButton>
                                            <af:commandToolbarButton text="Export" id="ctb11a" icon="/image/hierarchy/EXCEL.png" binding="#{ImpactAnalysisUIBean.cntrlExportButton}">
                                                <af:fileDownloadActionListener method="#{pageFlowScope.HierarchyExportBean.impactAssessPOIExport}" contentType="application/x-download"
                                                                               filename="#{pageFlowScope.HierarchyExportBean.excelFileName}"/>
                                            </af:commandToolbarButton>
                                            <af:commandToolbarButton text="Legend" id="cb3" icon="/image/color_swatch.png">
                                                <af:showPopupBehavior popupId="p4" align="afterStart"/>
                                            </af:commandToolbarButton>
                                            <af:menuBar id="mb1">
                                                <af:menu text="Options" id="m34" icon="/image/bullet_wrench_red.png">
                                                    <af:selectBooleanCheckbox text="Include LLTs in Export" id="sbc3" valueChangeListener="#{pageFlowScope.NMQWizardBean.includeLLTsInExportChanged}"
                                                                      autoSubmit="true" rendered="#{securityContext.userInRole['Requestor'] or securityContext.userInRole['MQM']}" selected="false"/>
                                                    <af:selectBooleanCheckbox text="Export Displayed Only" id="sbc3t" valueChangeListener="#{pageFlowScope.NMQWizardBean.exportDisplayedOnlyChanged}"
                                                                              autoSubmit="true" rendered="false"
                                                                              binding="#{NMQWizardUIBean.cntrlExportDisplayedOnly}"/>
                                                </af:menu>
                                            </af:menuBar>
                                            
                                        </af:toolbar>
                                    </af:group>
                                </f:facet>
                            </af:panelBox>
                            <af:popup id="confirm">
                                <af:dialog title="Confirm" dialogListener="#{pageFlowScope.ImpactAnalysisBean.deleteSelected}" id="d3">
                                    <af:activeOutputText value="Delete all selected terms?" id="aot2"/>
                                </af:dialog>
                            </af:popup>
                        </af:group>
                    </f:facet>
                    <f:attribute name="currentPage" value="MedDRA Impact Assessment"/>
                    <f:facet name="pageBottom">
                        <af:panelGroupLayout id="pgl26" layout="horizontal" inlineStyle="padding:3px;">
                            <af:spacer width="10" height="10" id="s21"/>
                            <af:trainButtonBar value="#{controllerContext.currentViewPort.taskFlowContext.trainModel}" id="tbb1"
                                               binding="#{NMQWizardUIBean.cntrlTrainButtons}"/>
                            <af:commandButton text="#{RenderingRulesBean.wizardDetailsCancelButtonText}" id="cb1can" action="CANCEL" immediate="true"
                                              shortDesc="#{RenderingRulesBean.wizardDetailsCancelButtonHoverText}"/>
                            <af:spacer width="20" height="10" id="s19"/>
                            <af:inputText label="Dictionary" id="it1aw" value="#{bindings.Description.inputValue} v#{bindings.Version.inputValue}"
                                          readOnly="false" disabled="true" columns="200"/>
                            <af:spacer width="10" height="10" id="s20"/>
                            <af:inputText label="#{RenderingRulesBean.wizardDetailsTermName}" id="it3"
                                          value="#{pageFlowScope.NMQWizardBean.currentTermName}" readOnly="true" disabled="true"
                                          binding="#{NMQWizardUIBean.controlCurrentTermName}" columns="75"
                                          partialTriggers="TBL_NMQ_Y TBL_MQ_Y TBL_NMQ_N TBL_MQ_N T_CMQ_Y T_CMQ_N"/>
                        </af:panelGroupLayout>
                    </f:facet>
                </af:pageTemplate>
            </af:form>
        </af:document>
    </f:view>
</jsp:root>
